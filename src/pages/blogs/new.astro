---
import BlogEditor from "@components/BlogEditor.astro";
import Layout from "@layouts/Layout.astro";
---

<Layout>
    <BlogEditor id="new" />
</Layout>

<script>
    import {actions} from "astro:actions";
    import { navigate } from "astro:transitions/client";

    const form = document.querySelector("#blog-form") as HTMLFormElement;
    form.addEventListener("submit",async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target as HTMLFormElement);
        const { data, error } = await actions.createBlog(formData);
        
        if(data?.blogId){
            navigate(`/blogs/${data.blogId}`);
        }
      })
</script>